{{ $options := (dict "targetPath" "static/css/style.css" "outputStyle" "compressed" "enableSourceMap" false) }}
{{ $style := resources.Get "custom.scss" | resources.ToCSS $options }}

<!DOCTYPE html>
<html lang='en'>

<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5G83M37');</script>
  <!-- End Google Tag Manager -->

  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
  <meta name='description' content='{{ if .IsHome }}{{ $.Site.Params.description }}{{ else if .Description }}{{ .Description }}{{ else }}{{ .Title }}{{ end }}'>

  {{ if getenv "ROBOTS" }}
  <meta name='robots' content='{{ getenv "ROBOTS" }}'>
  {{ else if isset .Params "robots" }}
  <meta name='robots' content='{{ .Params.robots }}'>
  {{ end }}

  <title>{{ .Title }}{{ if not .IsHome }} | CyberFortress{{ end }}{{ if .Params.Titleaddtype }} {{ .Type | title }}{{ end }}</title>

  <link type='text/css' rel='stylesheet' href='//fonts.googleapis.com/css?family=Roboto:100,300,400'>
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-xVVam1KS4+Qt2OrFa+VdRUoXygyKIuNWUUUBZYv+n27STsJ7oDOHJgfF0bNKLMJF" crossorigin="anonymous">
  <!-- <link type='text/css' rel='stylesheet' href='https://cyberfortress-www-sandbox.appspot.com/static/css/style.css'> -->
  <!-- <link type='text/css' rel='stylesheet' href='{{ $style.RelPermalink }}'> -->
  <link type='text/css' rel='stylesheet' href='/static/css/style.css'>
  <link rel='icon' type='image/png' href='/images/favicon-32x32.png' sizes='32x32'>
  <link rel='icon' type='image/png' href='/images/favicon-96x96.png' sizes='96x96'>
</head>

<body class='d-flex flex-column'>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src='https://www.googletagmanager.com/ns.html?id=GTM-5G83M37' height='0' width='0' style='display:none;visibility:hidden'></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  {{ block "nav" . }}
  {{ partial "nav.html" . }}
  {{ end }}

  {{ block "main" . }}
  {{ end }}

  {{ block "footer" . }}
  {{ partial "footer.html" . }}
  {{ end }}

  <!-- jQuery first, then Popper.js, then Bootstrap JS-->
  <script src="https://code.jquery.com/jquery-3.4.0.min.js" integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <!-- D3.js -->
  <script src="https://d3js.org/d3.v5.min.js"></script>

  <script src='/scripts/main.js'></script>
  <script src='/scripts/poppers.js'></script>
  <script src='/scripts/email.js'></script>
  <!-- <script src='/scripts/riskscore.js'></script> -->
  <!-- <script src='/scripts/downtimepage.js'></script> -->
  {{ block "addscripts" . }}
  {{ end }}

  <script>
    // Form validation - with Bootstrap 4//
    (function() {
      'use strict';

      window.addEventListener('load', function() {
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.getElementsByClassName('needs-validation');

        // Loop over them and prevent submission
        var validation = Array.prototype.filter.call(forms, function(form) {
          form.addEventListener('submit', function(event) {
            // Get Email from input
            var email = document.getElementById('user-email').value;

            if (form.checkValidity() === false) {
              event.preventDefault();
              event.stopPropagation();
            }
            if (email.includes('gmail')) {
              event.preventDefault();
              event.stopPropagation();
              window.location.replace("/invalid/");
            }
            form.classList.add('was-validated');
          }, false);
        });
      }, false);
    })();

  </script>

</body>

</html>
